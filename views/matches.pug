extends layout.pug

block scripts
	script.
		$(function() {
			$('.btn-continue-match').click(function() {
				window.location.href = '/match/' + $(this).closest('tr').find('th').text();
			});
			$('.btn-view-results').click(function() {
				console.log($(this));
				window.location.href = '/match/' + $(this).closest('tr').find('th').text() + '/results';
			});
		});

block content
	h2 Matches
	p.
		Overview over all played matches

	// TODO Add pagination to this table to limit number of matches displayed
	div(class='table-responsive')
		table(class='table table-striped table-bordered')
			thead
				tr
					th Start Time
					th End Time
					th Starting Score
					th Stake
					th Winner
					th Players
					th Results
			tbody
				each match in matches
					tr
						th(hidden='true' scope='row')= match.id
						td= match.start_time
						td= match.end_time === undefined ? '' : match.end_time
						td= match.starting_score
						td
						if match.is_finished
							td= match.winner.name
						else
							td -
						td
							table(class='table table-striped table-bordered')
								tbody
									each player in match.players
										tr
											td= player.name
						if !match.is_finished
							td
								button(type='button' id='continueMatchButton' class='btn btn-primary btn-block btn-continue-match') Continue
						else
							td
								button(type='button' class='btn btn-primary btn-block btn-view-results') View