extends layout.pug

block scripts
	script.
		$(document).ready(function(){
			$('#player_scores_table').DataTable({
				searching: false,
		    	paging: false,
		    	bInfo : false,
		    	order: [[ 2,  'desc' ]],
		        columnDefs: [
		            {
		                targets: [ 1 ],
		                visible: true
					}
		        ]		    	
			});
		});

block content
	h2 Statistics for #{player.name}

	div(class='table-responsive')
		table(id='player_statistics_table' class='table table-striped table-bordered')
			thead
				tr
					th Played
					th Won
					th Win %
					th First 9 PPD
					th Overall PPD
					th Checkout%
					th Scores
			tbody
					tr
						td
							p= player.gamesPlayed
						td
							p= player.gamesWon
						td
							p= player.gamesPlayed == 0 ? 0 : (player.gamesWon * 100 / player.gamesPlayed).toFixed(2)
						td
							p= player.first9ppd.toFixed(2)
						td
							p= player.ppd.toFixed(2)
						td
							p= (player.gamesWon * 100 / player.checkoutAttempts).toFixed(2) + '%'
						td
							p= player['60+'] == 0 ? "" : "60+: " + player['60+']
							p= player['100+'] == 0 ? "" : "100+: " + player['100+']
							p= player['140+'] == 0 ? "" : "140+: " + player['140+']
							p= player['180s'] == 0 ? "" : "180:  " + player['180s']

	div(class='table-responsive')
		h2 Hits	
		table(id='player_scores_table' class='table table-striped table-bordered')
			thead
				tr
					th Dart
					th Count
					th Hit %
			tbody
				each score, key  in scores
					each value, multiplier in scores[key]
						tr
							td(class='col-sm-2 dart-score-container' data-order=key + multiplier)
								if multiplier == 3
									label(style='background-color: #d9534f')= 'T-' + key
								else if multiplier == 2
									if key == 25
										label(style='background-color: orange') Bull
									else
										label(style='background-color: orange')= 'D-' + key
								else
									if key == 0 
										label Miss
									else if key == 25
										label Bull
									else
										label= key
							td= value
							td= (value * 100 / scores.totalThrows).toFixed(2) + '%'
