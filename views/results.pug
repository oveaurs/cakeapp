extends layout.pug

block content
	h2 Results

	p.
		ID: #{match.id} <br>
		Started: #{match.created_at} <br>
		Finished: #{match.end_time === undefined ? '' : match.end_time} <br>
		Duration: #{((match.end_time - match.created_at) / (60 * 1000)).toFixed(1)} minutes <br>
		Stakes: #{match.stake === "" ? "None" : match.stake}
	
	table(class='table table-striped table-bordered')
		thead
			tr
				th Player
				th Visits
				th First 9 PPD
				th PPD
				th Winner
		tbody
			each player in players
				tr
					td= player.name
					td= player.visits
					td= player.first9ppd
					td= player.ppd.toFixed(2)
					if match.winner_id !== undefined && player.id === match.winner_id
						td
							span(class='glyphicon glyphicon-ok' aria-hidden='true')
					else
						td
	p.
		Starting score was #{match.starting_score}, and a total of #{scores.length * 3} darts were thrown by #{Object.keys(players).length} players

	table(class='table table-striped table-bordered')
		thead
			tr
				th Player
				th First Dart
				th Second Dart
				th Third Dart
				th Total
				th PPD
		tbody
			each throws in scores
				tr
					td= players[throws.player_id].name
					td= throws.first_dart
					td= throws.second_dart
					td= throws.third_dart
					td= throws.first_dart + throws.second_dart + throws.third_dart
					td= ((throws.first_dart + throws.second_dart + throws.third_dart) / 3).toFixed(2)